"use strict";const inputText=document.querySelector(".js-form__input"),searchBtn=document.querySelector(".js-form__searchBtn"),resetBtn=document.querySelector(".js-form__resetBtn"),listElement=document.querySelector(".js-listSearch"),listElementFav=document.querySelector(".js-listFav"),msgNotFound=document.querySelector(".js-form__msg"),resetFavBtn=document.querySelector(".js-fav__input"),leftArrow=document.getElementById("js-leftArrow"),rightArrow=document.getElementById("js-rightArrow"),carrousel=document.querySelector(".js-search__container"),msgFav=document.querySelector(".js-fav__h2"),imgPlaceholder="https://via.placeholder.com/210x295/ffffff/666666/?text=TV",urlStart="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita",url="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=";let coctailData=[],coctailFav=[];const cocktailFavStored=JSON.parse(localStorage.getItem("favCoctails"));cocktailFavStored&&(coctailFav=cocktailFavStored,renderFav(coctailFav)),addFavRstBtn();const cocktailDatatStored=JSON.parse(localStorage.getItem("coctails"));function renderCoctail(t){null===t.image&&(t.image=imgPlaceholder);const e=document.createElement("li"),a=document.createElement("div");e.setAttribute("class","coctail"),a.setAttribute("class","coctail__div js-coctail"),a.setAttribute("id",""+t.id);const c=document.createElement("img");c.setAttribute("src",t.image),c.setAttribute("class","coctail__div__img"),a.appendChild(c);const n=document.createTextNode(t.image);c.appendChild(n);const o=document.createElement("div");o.setAttribute("class","coctail__div__t"),a.appendChild(o);const i=document.createElement("h3");i.setAttribute("class","coctail__div__t__name"),o.appendChild(i);const r=document.createTextNode(t.name);i.appendChild(r);const l=document.createElement("i");l.setAttribute("class","fa-regular fa-star coctail__div__t__icon js-star"),o.appendChild(l),e.appendChild(a);return void 0!==coctailFav.find(e=>t.id===e.id)&&l.setAttribute("class","fa-solid fa-star coctail__div__t__icon--selected js-star"),e}function renderCoctailList(t){listElement.innerHTML="";for(const e of t)listElement.appendChild(renderCoctail(e));addEventToCoctail()}function renderFav(t){listElementFav.innerHTML="";for(const e of t)listElementFav.appendChild(renderCoctail(e));localStorage.setItem("favCoctails",JSON.stringify(t)),addEventToCoctail()}function handleSearchBtn(t){t.preventDefault();const e=inputText.value;fetch(`${url}${e}`).then(t=>t.json()).then((function(t){if(null!==t.drinks){coctailData=t.drinks.map(t=>({name:t.strDrink,id:t.idDrink,image:t.strDrinkThumb}));renderCoctailList(coctailData.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())))}else msgNotFound.innerHTML="Este cóctel no lo tenemos, prueba con otro."}))}function handleFav(t){t.preventDefault();const e=t.currentTarget.id,a=coctailData.find(t=>t.id===e),c=coctailFav.findIndex(t=>t.id===e);-1===c?coctailFav.push(a):coctailFav.splice(c,1),addFavRstBtn(),renderFav(coctailFav),renderCoctailList(coctailData)}function addEventToCoctail(){const t=document.querySelectorAll(".js-coctail");for(const e of t)e.addEventListener("click",handleFav)}function handleResetBtn(){inputText.value="",localStorage.removeItem("favCoctails"),coctailFav.length=0,coctailData.length=0;const t=JSON.parse(localStorage.getItem("coctails"));coctailData=t,renderCoctailList(coctailData),renderFav(coctailFav),msgNotFound.innerHTML="",resetFavBtn.classList.remove("fav__input--shown"),resetFavBtn.classList.add("fav__input")}function handleResetFavBtn(){localStorage.removeItem("favCoctails"),coctailFav.length=0,renderFav(coctailFav),renderCoctailList(coctailData),resetFavBtn.classList.remove("fav__input--shown"),resetFavBtn.classList.add("fav__input"),msgFav.innerHTML="Selecciona el cóctel para añadirlo a favoritos"}function addFavRstBtn(){0!==coctailFav.length?(resetFavBtn.classList.add("fav__input--shown"),resetFavBtn.classList.remove("fav__input"),msgFav.innerHTML="Tus favoritos :"):(resetFavBtn.classList.remove("fav__input--shown"),resetFavBtn.classList.add("fav__input"),msgFav.innerHTML="Selecciona el cóctel para añadirlo a favoritos")}function handleRightArrow(){carrousel.scrollLeft+=carrousel.offsetWidth}function handleLeftArrow(){carrousel.scrollLeft-=carrousel.offsetWidth}cocktailDatatStored?(coctailData=cocktailDatatStored,renderCoctailList(coctailData)):fetch(urlStart).then(t=>t.json()).then(t=>{coctailData=t.drinks.map(t=>({name:t.strDrink,id:t.idDrink,image:t.strDrinkThumb})),renderCoctailList(coctailData),localStorage.setItem("coctails",JSON.stringify(coctailData))}),searchBtn.addEventListener("click",handleSearchBtn),resetBtn.addEventListener("click",handleResetBtn),resetFavBtn.addEventListener("click",handleResetFavBtn),rightArrow.addEventListener("click",handleRightArrow),leftArrow.addEventListener("click",handleLeftArrow);