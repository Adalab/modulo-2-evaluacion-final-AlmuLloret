"use strict";const inputText=document.querySelector(".js-form__input"),searchBtn=document.querySelector(".js-form__searchBtn"),resetBtn=document.querySelector(".js-form__resetBtn"),listElement=document.querySelector(".js-listSearch"),listElementFav=document.querySelector(".js-listFav"),urlStart="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita",url="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=";let coctailData=[],coctailFav=[];const cocktailFavStored=JSON.parse(localStorage.getItem("favCoctails"));cocktailFavStored&&(coctailFav=cocktailFavStored,renderFav(coctailFav));const cocktailDatatStored=JSON.parse(localStorage.getItem("coctails"));function renderCoctail(t){const e=document.createElement("li"),a=document.createElement("div");e.setAttribute("class","coctail"),a.setAttribute("class","coctail__div js-coctail"),a.setAttribute("id",""+t.id);const c=document.createElement("img");c.setAttribute("src",t.image),c.setAttribute("class","coctail__div__img"),a.appendChild(c);const i=document.createTextNode(t.image);c.appendChild(i);const n=document.createElement("h3");n.setAttribute("class","coctail__div__name"),a.appendChild(n);const o=document.createTextNode(t.name);n.appendChild(o),e.appendChild(a);return void 0!==coctailFav.find(e=>t.id===e.id)&&a.setAttribute("class","coctail__div js-coctail selected"),e}function renderCoctailList(t){listElement.innerHTML="";for(const e of t)listElement.appendChild(renderCoctail(e));addEventToCoctail()}function renderFav(t){listElementFav.innerHTML="";for(const e of t)listElementFav.appendChild(renderCoctail(e));localStorage.setItem("favCoctails",JSON.stringify(t))}function handleSearchBtn(t){t.preventDefault;const e=inputText.value;fetch(`${url}${e}`).then(t=>t.json()).then(t=>{coctailData=t.drinks.map(t=>({name:t.strDrink,id:t.idDrink,image:t.strDrinkThumb}));renderCoctailList(coctailData.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())))})}function handleFav(t){t.preventDefault,t.currentTarget.classList.toggle("selected");const e=t.currentTarget.id,a=coctailData.find(t=>t.id===e),c=coctailFav.findIndex(t=>t.id===e);-1===c?coctailFav.push(a):coctailFav.splice(c,1),renderFav(coctailFav)}function addEventToCoctail(){const t=document.querySelectorAll(".js-coctail");for(const e of t)e.addEventListener("click",handleFav)}function handleResetBtn(){localStorage.removeItem("favCoctails"),coctailFav.length=0,renderCoctailList(coctailData),renderFav(coctailFav)}cocktailDatatStored?(coctailData=cocktailDatatStored,renderCoctailList(coctailData)):fetch(urlStart).then(t=>t.json()).then(t=>{coctailData=t.drinks.map(t=>({name:t.strDrink,id:t.idDrink,image:t.strDrinkThumb})),renderCoctailList(coctailData),localStorage.setItem("coctails",JSON.stringify(coctailData))}),searchBtn.addEventListener("click",handleSearchBtn),resetBtn.addEventListener("click",handleResetBtn);